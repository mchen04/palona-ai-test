<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image UI Test</title>
    <script>
        // Simple test to verify the UI changes
        async function testImageUpload() {
            console.log("Testing image upload UI...");
            
            // Create a test image
            const canvas = document.createElement('canvas');
            canvas.width = 100;
            canvas.height = 100;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, 100, 100);
            
            canvas.toBlob(async (blob) => {
                const file = new File([blob], 'test.png', { type: 'image/png' });
                
                const formData = new FormData();
                formData.append('image', file);
                formData.append('useRAG', 'true');
                
                try {
                    const response = await fetch('http://localhost:3001/api/search/image', {
                        method: 'POST',
                        body: formData,
                    });
                    
                    const result = await response.json();
                    console.log('Image upload test result:', result.success ? '✅ Success' : '❌ Failed');
                    
                    if (result.success) {
                        console.log('Image analysis:', result.imageAnalysis?.features);
                        console.log('Products found:', result.products?.length || 0);
                    }
                } catch (error) {
                    console.error('Test failed:', error);
                }
            });
        }
        
        window.onload = testImageUpload;
    </script>
</head>
<body>
    <h1>Testing Image Upload UI</h1>
    <p>Check the console for test results</p>
    <p>The UI changes have been implemented:</p>
    <ul>
        <li>✅ Image now appears inside the message bubble</li>
        <li>✅ Image is positioned above the message text</li>
        <li>✅ Image size is reduced to max 200px width</li>
        <li>✅ Image and text are visually connected</li>
        <li>✅ Proper alignment for user messages (right-aligned)</li>
    </ul>
</body>
</html>